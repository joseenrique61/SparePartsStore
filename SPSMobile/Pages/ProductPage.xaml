<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SPSMobile.Pages.ProductPage"
             Title="Products">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <Grid 
                ColumnDefinitions=".3*, .7*" 
                Padding="20" >
                <!-- Imagen del producto -->
                <Image Source="{Binding Image}" 
                       Aspect="AspectFill" 
                       HeightRequest="200" 
                       HorizontalOptions="Center" />
                
                <VerticalStackLayout Grid.Column="1" Spacing="20">
                    <!-- Nombre del producto -->
                    <Label Text="{Binding Name}" 
                           FontSize="Large" 
                           FontAttributes="Bold"
                           HorizontalOptions="Start" />

                    <VerticalStackLayout Spacing="10">
                        <!-- Descripción -->
                        <Label Text="{Binding Description, StringFormat='Description: {0}'}" 
                           FontSize="Body" 
                           LineBreakMode="WordWrap" />

                        <!-- Precio -->
                        <Label Text="{Binding Price, StringFormat='Precio: {0:C}'}" 
                           FontSize="Body" 
                           TextColor="Green" />
                    </VerticalStackLayout>
                    
                    <!-- Stock disponible -->
                    <Label Text="{Binding Stock, StringFormat='Stock disponible: {0}'}" 
                           FontSize="Body" 
                           TextColor="Gray" />

                    <!-- Selector de cantidad -->
                    <HorizontalStackLayout Spacing="10">
                        <Button x:Name="DecreaseButton"
                                Text="-" 
                                Clicked="OnDecreaseQuantityClicked" 
                                IsEnabled="{Binding CanDecreaseQuantity}" 
                                BackgroundColor="{StaticResource Secondary}" />

                        <Label x:Name="QuantityLabel"
                               Text="{Binding DesiredQuantity}" 
                               FontSize="Body" 
                               VerticalOptions="Center"
                               HorizontalOptions="Center" />

                        <Button x:Name="IncreaseButton"
                                Text="+"
                                Clicked="OnIncreaseQuantityClicked" 
                                IsEnabled="{Binding CanIncreaseQuantity}" 
                                BackgroundColor="{StaticResource Tertiary}" />
                    </HorizontalStackLayout>

                    <!-- Botón añadir al carrito -->
                    <Button Text="Add to cart"
                            Command="{Binding AddToCartCommand}" 
                            Clicked="OnAddToCartClicked"
                            BackgroundColor="{StaticResource Primary}" 
                            TextColor="White"
                            FontAttributes="Bold" />
                </VerticalStackLayout>
            </Grid>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>